import streamlit as st
from PIL import Image

st.set_page_config(page_title="Clothing Describer", page_icon="ðŸ‘—", layout="centered")

st.title("ðŸ‘— Clothing Description Generator")

st.write("Take or upload a picture of a clothing item, and I'll generate a description.")

# Upload or take a picture
uploaded_file = st.file_uploader(
    "Upload a clothing photo", 
    type=["jpg", "jpeg", "png"], 
    accept_multiple_files=False, 
    label_visibility="collapsed"
)

# Camera input (mobile-friendly)
camera_file = st.camera_input("Or take a picture with your camera")

# Use whichever source has data
image_source = camera_file or uploaded_file

if image_source:
    image = Image.open(image_source)
    st.image(image, caption="Uploaded Image", use_column_width=True)

    with st.spinner("Analyzing clothing..."):
        # This is where the description is generated.
        # In real use, you'd call OpenAI's Vision API or another model.
        # For now, we'll just make a placeholder result.
        
        # Example: send image to GPT for analysis
        # response = client.chat.completions.create(
        #     model="gpt-4.1",
        #     messages=[
        #         {"role": "system", "content": "You are a fashion assistant."},
        #         {"role": "user", "content": "Describe this clothing item."}
        #     ],
        #     images=[image_source]
        # )
        # description = response.choices[0].message["content"]

        # Placeholder text until connected to API
        description = "This looks like a blue denim jacket with long sleeves and button-up front."

    st.success("### Clothing Description")
    st.write(description)

    # Button to copy text (browser-native trick)
    st.text_area("Copy description:", description, height=100)
